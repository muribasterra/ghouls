<!DOCTYPE html>
<html>
<head profile="https://muribasterra.github.io/webmap/profile">
	<link rel="icon"
	      type="image/png"
	      href="https://image.flaticon.com/icons/svg/1138/1138148.svg">
  	<meta charset="utf-8">
  <title>Ghouls of Gainesville</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
  <link href='https://fonts.googleapis.com/css?family=Metal Mania' rel='stylesheet'>
  <style type="text/css">
    .custom .leaflet-popup-tip,
    .custom .leaflet-popup-content-wrapper {
      background: #D8E1F4;
      box-shadow: 0 3px 14px
	      rgba(0,0,0,0.4);
    }
	html, body #header {
		background-image: url('https://www.conoscenzealconfine.it/wp-content/uploads/2016/02/Orbs3.jpg');
		margin-left: 20px;
		margin-top: 0px;
		margin-bottom: 0px;
		height: 70px;
	  }			
	  h1 {
		color: #B7C0DE;
		font-family: "Metal Mania";
		font-size: 60px;
		text-shadow: 3px 3px #686D7D;
		text-align: left;
		margin-top: 0px;
		margin-bottom: 10px;
	  }
	  html, body, #map {
		  height: 100%;
		  width: 100%;
		  padding: 0px;
		  margin: 0px;			  
	  }
  </style>
</head>
<body>
  <div id="header">
    <h1><b>Ghouls of Gainesville</b></h1>
  </div>
  <div id="map">
  <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>
    // Variable to hold map. Includes settings for where the map will center upon loading, zoom level, etc.
    var map = L.map('map',{ center: [29.651974, -82.325011], zoom: 12, scrollWheelZoom: false});
    // Add OpenStreetMap tile layer to map element + attribution
L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png', { attribution: 'Â© OpenStreetMap' }).addTo(map);
    // Function to find user's current location
map.locate({setView: true, watch: true, maxZoom: 8});
    var userIcon = L.icon({ // Varible to create custom icon
      iconUrl: 'https://image.flaticon.com/icons/svg/1299/1299949.svg', // Link to icon
      iconSize: [32, 32], // Size of icon
      iconAnchor: [0, 0], // Icon anchor relative to point location
      popupAnchor: [0, 0], // Popup anchor relative to icon/point location
    });
// Tell Leaflet what to do once locate() is successful [bind locationfound event to onLocationFound()] 
map.on('locationfound', onLocationFound);
function onLocationFound(e) {
    // Create a marker at the users "latlng" and add it to the map
    L.marker(e.latlng, {icon:userIcon}).addTo(map); // Add custom userIcon to marker
}
    // Load GeoJSON file from repository using JQuery
    $.getJSON("ghosts2.geojson",function(webmap){
      //Add GeoJSON layer to map
      L.geoJson(webmap,{
        pointToLayer: function(feature, latlng) {
          var ghostIcon = new L.icon({ // Variable to create new custom icon for all features in geoJSON file
      iconUrl: 'https://image.flaticon.com/icons/svg/1138/1138148.svg',
      iconSize: [32, 32],
      iconAnchor: [15, 11],
      popupAnchor: [2, -15],
    });
          return L.marker(latlng, {icon:ghostIcon}); // Adds markers to all features in geoJSON file using custom ghostIcon
        },
        onEachFeature: function (feature, layer) { // Adds popups to all features in geoJSON file that include name, description, etc. 
          layer.bindPopup('<img src="'+feature.properties.Picture+'" style="width:300px"><h3>'+feature.properties.name+'</h3><h4>'+feature.properties.address+'</h4><p>'+feature.properties.description+'</p>');
        }
      }).addTo(map);
    });
  </script>
</body>
</html>
